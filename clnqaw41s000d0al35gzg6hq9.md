---
title: "Day 62 - Terraform and Docker ðŸ”¥"
datePublished: Sat Oct 14 2023 17:17:34 GMT+0000 (Coordinated Universal Time)
cuid: clnqaw41s000d0al35gzg6hq9
slug: day-62-terraform-and-docker
cover: https://cdn.hashnode.com/res/hashnode/image/upload/v1697303800802/d646234d-8ab5-406f-a53b-5fb189640d28.png
tags: docker, aws, devops, terraform, trainwithshubham

---

Terraform needs to be told which provider to use in the automation, hence we need to give the provider name with source and version. For Docker, we can use this block of code in your [main.tf](http://main.tf)

## [Blocks and Resources in Terraform](https://github.com/LondheShubham153/90DaysOfDevOps/blob/master/2023/day62/README.md#blocks-and-resources-in-terraform)

## [Terraform block](https://github.com/LondheShubham153/90DaysOfDevOps/blob/master/2023/day62/README.md#terraform-block)

## [Task-01](https://github.com/LondheShubham153/90DaysOfDevOps/blob/master/2023/day62/README.md#task-01)

* Create a Terraform script with Blocks and Resources
    

```yaml
terraform {
  required_providers {
    docker = {
      source  = "kreuzwerker/docker"
      version = "~> 2.21.0"
}
}
}
```

![](https://cdn.hashnode.com/res/hashnode/image/upload/v1697303107690/a16dc06c-aa76-4f3b-9a7b-336ed19eee54.png align="center")

This is a Terraform configuration block specifying the required Docker provider and its version.

In this configuration, you are specifying that your Terraform code requires the Docker provider to interact with Docker containers. The **source** parameter specifies the location of the provider code, which in this case is the **kreuzwerker/docker** GitHub repository. The **version** parameter specifies the minimum version of the provider that should be used.

### [Note: kreuzwerker/docker, is shorthand for](https://github.com/LondheShubham153/90DaysOfDevOps/blob/master/2023/day62/README.md#note-kreuzwerkerdocker-is-shorthand-for-registryterraformiokreuzwerkerdocker) [registry.terraform.io/kreuzwerker/docker](http://registry.terraform.io/kreuzwerker/docker)[.](https://github.com/LondheShubham153/90DaysOfDevOps/blob/master/2023/day62/README.md#note-kreuzwerkerdocker-is-shorthand-for-registryterraformiokreuzwerkerdocker)

## [Provider Block](https://github.com/LondheShubham153/90DaysOfDevOps/blob/master/2023/day62/README.md#provider-block)

The provider block configures the specified provider, in this case, docker. A provider is a plugin that Terraform uses to create and manage your resources.

```yaml
provider "docker" {}
```

![](https://cdn.hashnode.com/res/hashnode/image/upload/v1697303218256/33df7d94-2159-49a2-bd69-8ac206ecd9fe.png align="center")

## [Resource](https://github.com/LondheShubham153/90DaysOfDevOps/blob/master/2023/day62/README.md#resource)

Use resource blocks to define components of your infrastructure. A resource might be a physical or virtual component such as a Docker container, or it can be a logical resource such as a Heroku application.

Resource blocks have two strings before the block: the resource type and the resource name. In this example, the first resource type is docker\_image and the name is Nginx.

## [Task-02](https://github.com/LondheShubham153/90DaysOfDevOps/blob/master/2023/day62/README.md#task-02)

* Create a resource Block for an nginx docker image
    

```yaml
resource "docker_image" "nginx" {
 name         = "nginx:latest"
 keep_locally = false
}
```

* Create a resource Block for running a docker container for nginx
    

```yaml
resource "docker_container" "nginx" {
 image = docker_image.nginx.latest
 name  = "tutorial"
 ports {
   internal = 80
   external = 80
 }
}
```

![](https://cdn.hashnode.com/res/hashnode/image/upload/v1697303319698/ba1ba9e6-2d72-4a99-917a-0962a73d6c82.png align="center")

After creating a Terraform configuration file (with a .tf extension), use the following Terraform commands to provision and manage your infrastructure:

**Terraform init:** Initializes a new or existing Terraform working directory by downloading and installing any required providers and modules, initializing the backend, and downloading any necessary plugins.

![](https://cdn.hashnode.com/res/hashnode/image/upload/v1697303373227/92cd264d-ee7e-4495-8ff9-ce8ce5f9ee3f.png align="center")

**Terraform plan:** Generates an execution plan that shows what actions Terraform will take to reach the desired state specified in the configuration file. This command also reports any changes that will be made to the infrastructure.

```yaml
terraform plan
```

![](https://cdn.hashnode.com/res/hashnode/image/upload/v1697303491451/c3786cbd-0720-4ce4-acec-ccfbf474d977.png align="center")

**Terraform apply:** Executes the actions proposed in the execution plan generated by terraform plan. This command provisions and configures the infrastructure defined in the configuration file.

```yaml
terraform apply
```

![](https://cdn.hashnode.com/res/hashnode/image/upload/v1697303554459/b5aacdac-025d-491b-bf17-065819f45c46.png align="center")

![](https://cdn.hashnode.com/res/hashnode/image/upload/v1697303573343/f15bc9bb-9530-4c7e-8267-ada3a7b6d8ca.png align="center")

Browse public IP address, you can see the Nginx default page.

![](https://cdn.hashnode.com/res/hashnode/image/upload/v1697303728357/a97d6769-df20-4e33-844f-04dbb4028e14.png align="center")

***Happy Learning!***